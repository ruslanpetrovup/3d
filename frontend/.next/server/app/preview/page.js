(()=>{var e={};e.id=517,e.ids=[517],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1555:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>n});var a=r(7413),o=r(1120),s=r(9105);let n={title:"Preview — 3D Starter Pack",description:"Preview your custom 3D model generated from your photo. Download, order, or regenerate your unique 3D starter pack!",keywords:"3D model preview, starter pack, photo to 3D, avatar, custom 3D, download 3D, order 3D model, regenerate 3D",openGraph:{title:"Preview — 3D Starter Pack",description:"Preview your custom 3D model generated from your photo. Download, order, or regenerate your unique 3D starter pack!",url:"https://kitofu.shop/preview",siteName:"3D Starter Pack",images:[{url:"https://kitofu.shop/icon.png",width:1200,height:630,alt:"3D Starter Pack Preview"}],type:"website"},twitter:{card:"summary_large_image",title:"Preview — 3D Starter Pack",description:"Preview your custom 3D model generated from your photo. Download, order, or regenerate your unique 3D starter pack!",images:["https://kitofu.shop/icon.png"]}};function i(){return(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)("div",{className:"text-white text-center mt-20",children:"Загрузка..."}),children:(0,a.jsx)(s.default,{})})}},2413:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d});var a=r(5239),o=r(8088),s=r(8170),n=r.n(s),i=r(893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["preview",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1555)),"C:\\Users\\fallen\\Desktop\\3d\\frontend\\src\\app\\preview\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,6439)),"C:\\Users\\fallen\\Desktop\\3d\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["C:\\Users\\fallen\\Desktop\\3d\\frontend\\src\\app\\preview\\page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/preview/page",pathname:"/preview",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3035:(e,t,r)=>{Promise.resolve().then(r.bind(r,9105))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},7970:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var a=r(687),o=r(474),s=r(6189),n=r(3210),i=r(1735);function l({isOpen:e,onClose:t,photoId:r}){let[o,s]=(0,n.useState)({firstName:"",lastName:"",email:"",country:"",city:"",address:""}),[l,d]=(0,n.useState)(!1),u=async e=>{e.preventDefault(),d(!0);let t=`${o.country}, ${o.city}, ${o.address}`,a={first_name:o.firstName,last_name:o.lastName,email:o.email,shipping_address:t,photo_id:r};try{let e=await fetch(`${process.env.NEXT_PUBLIC_API_URL}/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok)throw Error("Error creating order");let t=await e.json();if(t?.paymentUrl)window.location.href=t.paymentUrl;else throw Error("Failed to get payment link")}catch(e){console.error("Error:",e),alert("Failed to place order. Please try again later.")}finally{d(!1)}};return e?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4",children:(0,a.jsxs)(i.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#1B263B] text-white p-6 rounded-2xl w-full max-w-md shadow-xl border border-white/10",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Place Order"}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:u,children:[(0,a.jsx)("input",{type:"text",placeholder:"First Name",value:o.firstName,onChange:e=>s({...o,firstName:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-[#0D1B2A] rounded-xl border border-white/10 focus:outline-none"}),(0,a.jsx)("input",{type:"text",placeholder:"Last Name",value:o.lastName,onChange:e=>s({...o,lastName:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-[#0D1B2A] rounded-xl border border-white/10 focus:outline-none"}),(0,a.jsx)("input",{type:"email",placeholder:"Email",value:o.email,onChange:e=>s({...o,email:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-[#0D1B2A] rounded-xl border border-white/10 focus:outline-none"}),(0,a.jsx)("input",{type:"text",placeholder:"Country",value:o.country,onChange:e=>s({...o,country:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-[#0D1B2A] rounded-xl border border-white/10 focus:outline-none"}),(0,a.jsx)("input",{type:"text",placeholder:"City",value:o.city,onChange:e=>s({...o,city:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-[#0D1B2A] rounded-xl border border-white/10 focus:outline-none"}),(0,a.jsx)("input",{type:"text",placeholder:"Address",value:o.address,onChange:e=>s({...o,address:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-[#0D1B2A] rounded-xl border border-white/10 focus:outline-none"}),(0,a.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-[#F97316] hover:bg-orange-600 py-3 rounded-xl font-bold transition shadow-lg disabled:opacity-50",children:l?"Processing...":"Confirm Order"})]}),(0,a.jsx)("button",{onClick:t,className:"mt-4 text-sm text-gray-400 hover:underline",children:"Cancel"})]})}):null}var d=r(7952);function u(){(0,s.useRouter)();let e=(0,s.useSearchParams)().get("id"),[t,r]=(0,n.useState)(!1),[i,u]=(0,n.useState)(!1),[c,p]=(0,n.useState)(null);return(0,a.jsxs)("main",{className:"min-h-screen bg-[#0D1B2A] text-white px-4 py-12 flex flex-col items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8 text-center leading-tight bg-gradient-to-r from-orange-400 via-pink-500 to-purple-600 bg-clip-text text-transparent uppercase",children:"Your Starter Pack!"}),(0,a.jsx)("div",{className:"relative w-full max-w-md mb-8",children:i?(0,a.jsx)("div",{className:"w-full aspect-square bg-[#1B263B] rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-400 animate-pulse",children:"Generating..."})}):c?(0,a.jsx)(o.default,{src:c,alt:"Generated image",width:448,height:400,className:"rounded-xl border border-white/10 shadow-lg"}):(0,a.jsx)("div",{className:"w-full aspect-square bg-[#1B263B] rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-400",children:"No image"})})}),(0,a.jsxs)("div",{className:"flex gap-4",children:[c&&(0,a.jsx)("button",{onClick:()=>{let e=document.createElement("a");e.href=c,e.download="starter-pack.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)},className:"bg-[#1D3557] hover:bg-green-700 text-white px-6 py-3 rounded-xl transition",children:"Save"}),(0,a.jsx)(d.A,{className:"bg-[#1D3557] hover:bg-[#18314F] text-white px-6 py-3 rounded-xl transition",title:"Regenerate"})]}),(0,a.jsx)("button",{onClick:()=>r(!0),className:"bg-[#F97316] hover:bg-orange-600 text-white px-6 py-3 rounded-xl transition w-full mt-6 max-w-md",children:"Order now"}),e&&(0,a.jsx)(l,{isOpen:t,onClose:()=>r(!1),photoId:e})]})}},9105:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\fallen\\\\Desktop\\\\3d\\\\frontend\\\\src\\\\components\\\\pages\\\\Preview.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\fallen\\Desktop\\3d\\frontend\\src\\components\\pages\\Preview.tsx","default")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9827:(e,t,r)=>{Promise.resolve().then(r.bind(r,7970))}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[447,56,658,735,164],()=>r(2413));module.exports=a})();